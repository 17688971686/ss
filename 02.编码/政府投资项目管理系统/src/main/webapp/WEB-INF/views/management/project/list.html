<style>
	.cs-title{
	 height: 30px;
	 line-height: 30px;
	 font-size: 16px;
	 font-weight: bold;
 	}
	.cs-box-custom{
		background: #f5f5f6;
		overflow: hidden;
		margin: 2px;
	}
	.cs-list-text{
		min-height: 190px;
		text-align: center;
		line-height: 180px;
		font-size: 30px;
		color: #6b6b6b;
		font-weight: bold;
	}
	.cs-list-bottom{
		background: #00c1de;height: 40px; line-height: 40px; text-align: center; color: #fff;
	}
</style>
<div ng-include src="'/contents/common/dialog-alert.tmpl.html'"></div>
<div ng-include src="'/contents/common/dialog-confirm.tmpl.html'"></div>
<div class="well well-sm" style="background:white;">
	  <ol class="breadcrumb">
		  <li style="color:#0b8d39;padding-left:15px;"> 当前位置：</li>
		  <li><a href="#/">首页</a></li>
	      <li>项目管理</li>	 
	      <li class="active">政府投资项目列表</li>
	  </ol>
</div>
	  <script type="text/template" id="columnBtns">
			<a class="btn btn-xs btn-primary" href="#/projectEdit/{0}/{1}"><span class="glyphicon glyphicon-pencil"></span>编辑</a>
			<!--<button class="btn btn-xs btn-primary" ng-click="{2}"><span class="glyphicon glyphicon-question-sign"></span>是否填报</button>-->
		  	<button class="btn btn-xs btn-primary" ng-click="{3}"><span class="glyphicon glyphicon-question-sign">纳入/纳出项目库</span></button>
			<button class="btn btn-xs btn-primary" ng-click="vm.shenBaoRecords('{0}')">申报记录查看</button>
	  </script>

		<script type="text/template" id="columnBtns_info">
			<button class="btn btn-xs btn-primary" ng-click="vm.recordinfos('{0}')">申报记录查看</button>
		</script>

<!--<div class="well well-sm" style="background:white;">
	  <div class="row">
	  	<div class="col-md-3">
	  		 <div class="cs-title">项目总数统计（个）</div>
		     <div class="cs-box-custom" style="min-height: 280px;">
	             <p style="padding: 20px;"></p>
			     <div class="cs-list-text">{{vm.totalProjects}}</div>
			     <div class="cs-list-bottom" ng-click="vm.showTotalGrid()" data-toggle="tooltip"
	        		data-placement="bottom" title="点击显示项目列表">项目列表</div>
			</div>
	  	</div>
	  	<div class="col-md-5">
	  		<div class="cs-title">项目阶段分类统计</div>
			<div class="cs-box-custom" style="min-height: 280px;">
		 		<div id="stageStatistics" style="min-height: 280px;"></div>
			</div>
	  	</div>
	  	<div class="col-md-4">
	  		<div class="cs-title">项目月报分类统计</div>
			<div class="cs-box-custom" style="min-height: 280px;">
		 		<div id="monRepStatistics" style="min-height: 280px;"></div>
			</div>
	  	</div>
	  </div>
</div>

<div class="well well-sm" style="background:white;">
	  <div class="row">
	  	<div class="col-md-4">
	  		 <div class="cs-title">项目行业分类统计</div>
		     <div class="cs-box-custom" style="min-height: 300px;">
		     	<div id="industryStatistics" style="min-height: 300px;"></div>
			</div>
	  	</div>
	  	<div class="col-md-4">
	  		<div class="cs-title">项目建设单位统计（个）</div>
			<div class="cs-box-custom" style="min-height: 300px;">
            <p style="padding: 10px"></p>
		 	<div class="cs-list-text" >{{vm.statistical.total}}</div>
		</div>
	  	</div>
	  	<div class="col-md-4">
	  		<div class="cs-title">项目总投资金额分布统计</div>
			<div class="cs-box-custom" style="min-height: 300px;">
            <p style="padding: 10px"></p>
		 	<div class="cs-list-text" >{{vm.statistical.total}}</div>
		</div>
	  	</div>
	  </div>
</div>-->
	  <div class="search">
	  	<table class="table table-bordered" style="margin-bottom:0px;">
	  			<tr>
	  				<td colspan="8" class="bg-info">
	  					<span style="padding:10px;"><strong>项目查询</strong></span>
	  				</td>
	  			</tr>
	  			<tr>
	  				<td class="formAlignRight">项目名称：</td>
	  				<td style="width:25%"><input type="text" style="width:360px;" placeholder="请输入项目名称（可少输不可输错）" ng-model="vm.search.projectName"/></td>
	  				<td class="formAlignRight">项目阶段：</td>
	  				<td>
	  					<select style="height:30px;" ng-model="vm.search.projectStage">
				  			<option value="">---请选择---</option>
				  			<option ng-repeat="x in vm.basicData.projectStage" value="{{x.id}}">{{x.description}}</option>
				  		</select>
	  				</td>
					<td class="formAlignRight">项目类型：</td>
                    <td>
                        <select style="height:30px;" ng-model="vm.search.projectCategory">
                            <option value="">-&#45;&#45;请选择-&#45;&#45;</option>
                            <option value="projectCategory_1">A类</option>
                            <option value="projectCategory_2">B类</option>
                            <option value="projectCategory_3">C类</option>
                            <option value="projectCategory_4">D类</option>
                        </select>
                    </td>
	  			</tr>
	  			<tr>
	  				<td class="formAlignRight">项目所属单位：</td>
	  				<td>
	  					<select style="height:30px;" ng-model="vm.search.unitName">
				  			<option value="">---请选择---</option>
				  			<option ng-repeat="x in vm.basicData.userUnit" value="{{x.id}}">{{x.unitName}}</option>
				  		</select>
	  				</td>
	  				<td class="formAlignRight">项目行业：</td>
	  				<td>
	  					<select style="height:30px;" ng-model="vm.search.projectIndustry">
				  			<option value="">---请选择---</option>
				  			<option ng-repeat="x in vm.basicData.projectIndustry_ZF" value="{{x.id}}">{{x.description}}</option>
				  		</select>
	  				</td>
                    <!--<td class="formAlignRight">时间</td>
                    <td>
                         <input id="beginDate" name="beginDate"  onfocus="WdatePicker({skin:'whyGreen',dateFmt:'yyyy-MM-dd',readOnly:true})" 
                                 class="Wdate" onChange=""
                                 ng-model="vm.search.projectStartDate" autocomplete="off" />
                         ~
                         <input id="beginDate" name="beginDate"  onfocus="WdatePicker({skin:'whyGreen',dateFmt:'yyyy-MM-dd',readOnly:true})" 
                                 class="Wdate" onChange=""
                                 ng-model="vm.search.projectEndDate" autocomplete="off" />
                    </td>-->
	  			</tr>
	  			<tr>
	  				<td colspan="8">
	  					<button class="btn btn-success btn-sm pull-right" ng-click="vm.doSearch()"><span class="glyphicon glyphicon-search"></span>查询</button>
	  				</td>
	  			</tr>
	  		</table>
	  </div>
	  <div class="toolbar">
	  	<button class="btn btn-sm btn-primary" ng-click="vm.addProject()"><span class="glyphicon glyphicon-plus"></span>新增项目</button>
	  	<a class="btn btn-sm btn-primary" href="javascript:void(0);"
                                      ng-click="vm.statistics(1)"><span class="glyphicon glyphicon-file"></span>&nbsp;项目统计报表</a>
        <a class="btn btn-sm btn-primary" href="javascript:void(0);"
                                              ng-click="vm.statistics(2)"><span class="glyphicon glyphicon-file"></span>&nbsp;分类统计报表</a>                              
	  	<!--<button class="btn btn-sm btn-primary" ng-click="vm.isMonthReports()">批量设置是否填报</button>-->
	  </div> 
     <form id="form" name="form">          
         <div class="grid" kendo-grid="grid" k-options="vm.gridOptions"></div>
    </form>

<!-- 选择投资类型模态框 -->
<div class="modal fade" id="myModal_add" tabindex="-1" role="dialog"> 
	<div class="modal-dialog"> 
		<div class="modal-content"> 
			<div class="modal-header bg-primary"> 
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button> 
				<h4 class="modal-title" id="myModalLabel">选择投资类型</h4> 
			</div> 
			<div class="modal-body">
				<label ng-repeat="x in vm.basicData.investmentType">
					<input name="investmentType" type="radio" value="{{x.id}}" ng-model="vm.model.projectInvestmentType"/>{{x.description}}&nbsp;&nbsp;
				</label>
			</div> 
			<div class="modal-footer"> 
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>			
		 		<button type="button" class="btn btn-success" ng-click="vm.confirmInvestmentType()">确认</button> 
			</div> 
		</div><!-- /.modal-content --> 
	</div><!-- /.modal --> 
</div>

<!-- 设置是否填报模态框 -->
<div class="modal fade" id="myModal_edit" tabindex="-1" role="dialog"> 
	<div class="modal-dialog"> 
		<div class="modal-content"> 
			<div class="modal-header bg-primary"> 
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button>
				<h4 class="modal-title" id="myModalLabel">设置是否填报</h4> 
			</div> 
			<div class="modal-body">
				<span style="display:none" ng-bind="vm.model.id"></span>
				<label>是</label>
				<input type="radio" name="isMonthReport" value="true" ng-checked="vm.model.isMonthReport==1" ng-model="vm.model.isMonthReport"/>
				<label>否</label>
				<input type="radio" name="isMonthReport" value="false" ng-checked="vm.model.isMonthReport==0" ng-model="vm.model.isMonthReport"/>
			</div> 
			<div class="modal-footer"> 
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button> 						
				<button type="button" class="btn btn-primary" ng-click="vm.updateIsMonthReport()">提交更改</button>
			</div> 
		</div><!-- /.modal-content -->
	</div>
</div><!-- /.modal -->

<!-- 申报信息模态框 -->
<div class="modal fade" id="shenBaoRecords" tabindex="-1" role="dialog">
	<div class="modal-dialog" style="width: 80%;">
		<div class="modal-content">
			<div class="modal-header bg-primary">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button>
				<h4 class="modal-title" >关联申报信息</h4>
			</div>
			<div class="modal-body">
				<form name="form">
					<div class="grid" kendo-grid="grid" k-options="vm.gridOptions_shenBaoRecords"></div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div><!-- /.modal-content -->
	</div>
</div><!-- /.modal -->


<!--修改项目是否存入项目库-->
<div class="modal fade" id="myModal_update" tabindex="-1" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header bg-primary">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button>
				<h4 class="modal-title" id="myModalLabel">修改项目纳入/出项目库</h4>
			</div>
			<div class="modal-body">
				<span style="display:none" ng-bind="vm.model.id"></span>
				<label>纳入</label>
				<input type="radio" name="isIncludLibrary" value="true" ng-checked="vm.libary.isIncludLibrary==true" ng-model="vm.libary.isIncludLibrary"/>
				<label>纳出</label>
				<input type="radio" name="isIncludLibrary" value="false" ng-checked="vm.libary.isIncludLibrary==false" ng-model="vm.libary.isIncludLibrary"/>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				<button type="button" class="btn btn-primary" ng-click="vm.updateProjectToLibray()">提交更改</button>
			</div>
		</div><!-- /.modal-content -->
	</div>
</div><!-- /.modal -->
<!-- 申报信息模态框 -->
<div id="shenbaoInfo" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog"
		 style="margin: 80px auto; width: 80%; max-width: 1000px;">
		<div class="modal-content">
			<div class="modal-header bg-primary">
				<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<span class="modal-title">详细信息</span>
			</div>
			<div class="modal-body">
				<div ng-include
					 src="'/contents/admin/management/task/html/details/shenBaoInfoDetails.html'"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-success" data-dismiss="modal">关闭</button>
			</div>
		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>
<!-- /.modal -->


<!-- 项目统计报表模态框 -->
<div class="modal fade" id="project_statistics" tabindex="-1" role="dialog" >
    <div class="modal-dialog" style="margin: 80px auto; width: 80%; max-width: 1000px;">
        <div class="modal-content">
            <div class="modal-header bg-primary"> 
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button> 
                <h4 class="modal-title" id="myModalLabel">项目统计报表</h4> 
            </div> 
            <div class="modal-body">
                <!--报表-->
                <table class="table table-bordered table-striped">
                    <tr>
                        <th width="80px"  style="text-align: center;">序号</th>
                        <th width="300px" style="text-align: center;">项目类型</th>
                        <th width="300px" style="text-align: center;">总投资</th>
                        <th width="300px" style="text-align: center;">已安排投资</th>
                        <th width="300px" style="text-align: center;">安排年度投资</th>
                    </tr>
                    <tr>
                        <th align="center"></th>
                        <th style="text-align: center;">合计</th>
                        <th style="text-align: center;">{{vm.model.statisticsData.projectInvestSum}}</th>
                        <th style="text-align: center;">{{vm.model.statisticsData.projectInvestAccuSum}}</th>
                        <th style="text-align: center;">{{vm.model.statisticsData.applyAPYearInvest}}</th>
                    </tr>
                    <tr ng-repeat-start="x in vm.model.statisticsData.industry" ng-show="x.industry_projectInvestSum!=0 || 
                                                                                        x.industry_projectInvestAccuSum!=0 ||
                                                                                        x.industry_applyAPYearInvest!=0">
                        <th></th>
                        <th style="text-align: center;">{{x.projectIndustry}}</th>
                        <th style="text-align: center;">{{x.industry_projectInvestSum}}</th>
                        <th style="text-align: center;">{{x.industry_projectInvestAccuSum}}</th>
                        <th style="text-align: center;">{{x.industry_applyAPYearInvest}}</th>
                    </tr>
                        <tr ng-repeat-start="y in x.projectCategory" ng-show="y.projectInvestSum!=0 ||
                                                                              y.projectInvestAccuSum !=0 || 
                                                                              y.applyAPYearInvest!=0">
                            <th ></th>
                            <th style="text-align: center;">{{y.categoryName}}</th>
                            <th style="text-align: center;">{{y.projectInvestSum}}</th>
                            <th style="text-align: center;">{{y.projectInvestAccuSum}}</th>
                            <th style="text-align: center;">{{y.applyAPYearInvest}}</th>
                        </tr>
                            <tr ng-repeat-start="z in y.shenBaoInfoDtos">
                                <td align="center">{{$index+1}}</td>
                                <td align="center">
                                {{z.projectName}}
                                <br>
                                {{z.countryNumber}}
                                </td>
                                <td align="center">{{z.projectInvestSum}}</td>
                                <td align="center">{{z.projectInvestAccuSum}}</td>
                                <td align="center">{{z.applyAPYearInvest}}</td>
                            </tr>
                            <tr ng-repeat-end></tr>
                        <tr ng-repeat-end></tr>
                    <tr ng-repeat-end></tr>
                    
                </table>
            </div> 
            <div class="modal-footer"> 
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>			
            </div> 
		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<!-- 统计报表模态框 -->
<div class="modal fade" id="industry_statistics" tabindex="-1" role="dialog" >
    <div class="modal-dialog" style="margin: 80px auto; width: 80%; max-width: 1000px;">
        <div class="modal-content">
            <div class="modal-header bg-primary"> 
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button> 
                <h4 class="modal-title" id="myModalLabel">分类统计报表</h4> 
            </div> 
            <div class="modal-body">
                <!--报表-->
                <table class="table table-bordered table-striped">
                    <tr>
                        <td width="300px" style="text-align: center;">行业及合并系统</td>
                        <td width="300px" style="text-align: center;">项目个数</td>
                        <td width="300px" style="text-align: center;">项目总投资</td>
                        <td width="300px" style="text-align: center;">已安排投资</td>
                        <td width="300px" style="text-align: center;">安排年度投资</td>
                        <td width="300px" style="text-align: center;">安排年度投资占比</td>
                    </tr>
                    <tr>
                        <th style="text-align: center;">合计</th>
                        <th style="text-align: center;">{{vm.model.statisticsData.projectNum}}</th>
                        <th style="text-align: center;">{{vm.model.statisticsData.projectInvestSum}}</th>
                        <th style="text-align: center;">{{vm.model.statisticsData.projectInvestAccuSum}}</th>
                        <th style="text-align: center;">{{vm.model.statisticsData.applyAPYearInvest}}</th>
                        <th style="text-align: center;"></th>
                    </tr>
                    <tr ng-repeat-start="x in vm.model.statisticsData.industry" ng-show="x.industry_projectInvestSum!=0 || 
                                                                                        x.industry_projectInvestAccuSum!=0 ||
                                                                                        x.industry_applyAPYearInvest!=0">
                        <th style="text-align: center;">{{x.projectIndustry}}</th>
                        <th style="text-align: center;">{{x.projectNum}}</th>
                        <th style="text-align: center;">{{x.industry_projectInvestSum}}</th>
                        <th style="text-align: center;">{{x.industry_projectInvestAccuSum}}</th>
                        <th style="text-align: center;">{{x.industry_applyAPYearInvest}}</th>
                        <th style="text-align: center;">{{x.industry_applyAPYearInvest_percentage}}%</th>
                    </tr>
                        <tr ng-repeat-start="y in x.projectCategory" ng-show="y.projectInvestSum!=0 ||
                                                                              y.projectInvestAccuSum !=0 || 
                                                                              y.applyAPYearInvest!=0">
                            <td style="text-align: center;">{{y.categoryName}}</td>
                            <td style="text-align: center;">{{y.shenBaoInfoDtos.length}}</td>
                            <td style="text-align: center;">{{y.projectInvestSum}}</td>
                            <td style="text-align: center;">{{y.projectInvestAccuSum}}</td>
                            <td style="text-align: center;">{{y.applyAPYearInvest}}</td>
                            <td></td>
                        </tr>
                        <tr ng-repeat-end></tr>
                    <tr ng-repeat-end></tr>
                    
                </table>
            </div> 
            <div class="modal-footer"> 
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>			
            </div> 
		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

