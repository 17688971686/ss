<style>
.table-bordered>thead>tr>th, 
.table-bordered>tbody>tr>th, 
.table-bordered>tfoot>tr>th, 
.table-bordered>thead>tr>td, 
.table-bordered>tbody>tr>td, 
.table-bordered>tfoot>tr>td {
    border: 1px solid #ddd;
    vertical-align: middle;
}
label{font-weight:normal;}

.uploadBox .k-upload-status {
	display: none;
}

.uploadBox .k-header {
	background: transparent;
	border: 0px;
}

.uploadBox em {
	display: none;
}

.uploadBox .k-dropzone {
	padding: 0px;
	margin: 0px;
}
.uploadBox .k-upload-files{
display:none;
}
input.input-sm{height:30px; margin:0px; padding:0px;}
textarea.form-control {
	margin:0px; padding:0px;
}
.tab_content{
	padding:20px;
}
overflow: scroll !important;
</style>

<div ng-include src="'/contents/common/dialog-alert.tmpl.html'"></div>

<div class="well well-sm" style="background:white;">
	<ol class="breadcrumb">
		<li style="color:#0b8d39;padding-left:15px;"> 当前位置：</li>
		<li><a href="#/">首页</a></li>
		<li><a href="#/task/todo_audit">待办列表(审批类)</a></li>
		<li class="active">办理</li>
	</ol>                
 	<form id="form" name="form">
 		<div class="bg-info text-info" style="padding: 10px;">项目基本信息</div>  		
 		<table class="table table-bordered table-striped ">
			<tr>
				<td class="formAlignRight" style="width:150px;">办理事项：</td>
				<td style="width:250px;" ng-bind="vm.task.taskTypeDesc">
					
				<td class="formAlignRight" style="width:150px;">项目名称：</td>
				<td>
					<span ng-show="vm.isYearPlan" ng-bind="vm.model.shenBaoInfo.projectName"></span>
					<span ng-show="vm.isMonthReport" ng-bind="vm.model.project.projectName"></span>				
				</td>
			</tr>
			<tr>
				<td class="formAlignRight">项目阶段：</td>
				<td>
					<span ng-show="vm.isYearPlan" ng-bind="vm.getBasicDataDesc(vm.model.shenBaoInfo.projectStage)"></span>
					<span ng-show="vm.isMonthReport" ng-bind="vm.getBasicDataDesc(vm.model.project.projectStage)"></span>
				</td>
				<td class="formAlignRight">项目类型：</td>
				<td>
					<span ng-show="vm.isYearPlan" ng-repeat="x in vm.projectTypes" ng-bind="vm.getBasicDataDesc(x)+' '"></span>
					<span ng-show="vm.isMonthReport" ng-repeat="x in vm.model.project.projectType" ng-bind="vm.getBasicDataDesc(x)+' '"></span>			
				</td>
			</tr>	
			<tr>
				<td class="formAlignRight">项目行业归口：</td>
				<td>
					<span ng-show="vm.isYearPlan" ng-bind="vm.getBasicDataDesc(vm.model.shenBaoInfo.projectIndustry)"></span>
					<span ng-show="vm.isMonthReport" ng-bind="vm.getBasicDataDesc(vm.model.project.projectIndustry)"></span>
				</td>
				<td class="formAlignRight">项目分类：</td>
				<td>
					<span ng-show="vm.isYearPlan" ng-bind="vm.getBasicDataDesc(vm.model.shenBaoInfo.projectClassify)"></span>
					<span ng-show="vm.isMonthReport" ng-bind="vm.getBasicDataDesc(vm.model.project.projectClassify)"></span>
				</td>
			</tr>
			<tr>
				<td class="formAlignRight">项目建设地址：</td>
				<td colspan="3">
					光明新区
			 		<span ng-show="vm.isYearPlan" ng-bind="vm.getBasicDataDesc(vm.model.shenBaoInfo.divisionId)"></span>						
			 		<span ng-show="vm.isYearPlan" ng-bind="vm.model.shenBaoInfo.projectAddress"></span>
			 		<span ng-show="vm.isMonthReport" ng-bind="vm.getBasicDataDesc(vm.model.project.divisionId)"></span>						
			 		<span ng-show="vm.isMonthReport" ng-bind="vm.model.project.projectAddress"></span>
				</td>		
			</tr>	
			<tr>
				<td class="formAlignRight">项目总投资：</td>
				<td ng-show="vm.isYearPlan">
					<span  ng-bind="vm.model.shenBaoInfo.projectInvestSum | number:4"></span>&nbsp;(万元)		
				</td>
				<td ng-show="vm.isMonthReport">
					<span  ng-bind="vm.model.project.projectInvestSum | number:4"></span>&nbsp;(万元)
				</td>
				<td class="formAlignRight">累计完成投资：</td>
				<td ng-show="vm.isYearPlan">
					<span ng-bind="vm.model.shenBaoInfo.projectInvestAccuSum | number:4"></span>&nbsp;(万元)				
				</td>
				<td ng-show="vm.isMonthReport">
					<span ng-bind="vm.model.project.projectInvestAccuSum | number:4"></span>&nbsp;(万元)
				</td>
			</tr>	
			<tr>
				<td class="formAlignRight">项目简介：</td>
				<td colspan="3">
					<span ng-show="vm.isYearPlan"  ng-bind="vm.model.shenBaoInfo.projectIntro"></span>
					<span ng-show="vm.isMonthReport" ng-bind="vm.model.project.projectIntro" ></span>
				</td>
			</tr>
			<tr>
				<td class="formAlignRight">详细信息：</td>
				<td colspan="3" >
					<button class="btn btn-success btn-xs" ng-click="vm.dialog_shenbaoInfo()" >查看详细信息</button>
				</td>
			</tr>		
	</table>
	  		
		<div class="bg-info text-info" style="padding: 10px;">处理流转信息</div>  		
		<table class="table table-bordered table-striped ">
			<tr ng-repeat="x in vm.task.taskRecordDtos | orderBy:'createdDate':true" ><!--   ng-hide="x.processState =='processState_5' ||x.processState =='processState_4'"-->
				<td class="formAlignRight"  style="width:150px;"  ng-bind="vm.getBasicData(x.processState)"></td>
				<td >
					<div ng-bind="x.processSuggestion"></div>
					<div class="text-right" ng-bind="x.createdBy"></div>
					<div class="text-right" ng-bind="vm.formatDate(x.createdDate)"></div>
				</td>
			</tr>
		</table>
		
		<!-- 填报/待签收状态，执行秘书科分办操作 -->
		<!-- 秘书科分办状态，执行科长分办操作 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		<!-- 秘书科分办 -->
		

			<tr ng-hide="vm.isComplete">
				<td class="formAlignRight" style="width:150px;">填写处理意见：</td>
				<td>
					<textarea class="form-control" id="processSuggestion" name="processSuggestion"  maxlength="500" rows="3"
						ng-model="vm.model.taskRecord.processSuggestion" data-val="true" data-val-required="必填" placeholder="注：500字符以内"
						ng-change="vm.checkLength(vm.model.taskRecord.processSuggestion,500,'processSuggestionTips')">
					</textarea>
					<span data-valmsg-for="processSuggestion" data-valmsg-replace="true" class="required"></span>
					<div class="tipfont">您还可以输入<span id="processSuggestionTips"><font size="5">500</font></span>个字符!</div>						
				</td>
				
			</tr>
			
		
			<tr ng-hide="vm.isYearPlan || vm.isMonthReport ||vm.isComplete">
			<td class="formAlignRight">下一处理环节：<span class="required">(*)</span></td>
			<td>
				<div>
					<input type="radio" name="nextState" id="nextState" ng-click="vm.clicked()" value="{{vm.nextState}}" data-val="true" data-val-required="必选"/>{{vm.nextState}}&nbsp;&nbsp;
					<input type="radio" ng-hide="vm.task.processState !='processState_5'" name="nextState" id="nextState" ng-click="vm.clicked('keyuan')" value="科员办理" data-val="true" data-val-required="必选"/><span ng-hide="vm.task.processState !='processState_5'">科员办理</span>&nbsp;&nbsp;
					<input type="radio" ng-hide="vm.task.processState !='processState_5'" name="nextState" id="nextState" ng-click="vm.clicked('keshi')" value="科室办理" data-val="true" data-val-required="必选"/><span ng-hide="vm.task.processState !='processState_5'">科室办理</span>&nbsp;&nbsp;
					<input type="radio" name="nextState" id="nextState" ng-click="vm.clicked(vm.processState_tuiWen)" value="退文" data-val="true" data-val-required="必选"/>退文&nbsp;&nbsp;&nbsp;
					<input type="radio" name="nextState" id="nextState" ng-click="vm.clicked(vm.processState_banJie)" value="办结" data-val="true" data-val-required="必选"/>办结
				</div>
				<div>
				  	<span data-valmsg-for="nextState" data-valmsg-replace="true" class="required"></span>
				</div>
			</td>
			</tr>
				<tr ng-hide="vm.isYearPlan || vm.isMonthReport || vm.isComplete || vm.tuiwen  ||vm.task.processState !='processState_1' &&vm.isKeshi" ng-show="vm.task.processState =='processState_8' || vm.task.processState =='processState_10' || vm.task.processState =='processState_17'">
				<td class="formAlignRight">所属部门：</td>
				<td>
					<select class="form-control" id="selecrDept" name="selecrDept" ng-model="vm.model.dept" ng-change="vm.changed(vm.model.dept)" data-val="true" data-val-required="必选">
					  	<option value="">---请选择---</option>
						<option ng-repeat="y in vm.model.depts" value="{{y.id}}">{{y.name}}</option>
					</select>
					<span data-valmsg-for="selecrDept" data-valmsg-replace="true" class="required"></span>
				</td>
				
			</tr>
			
			<tr ng-hide="vm.isYearPlan || vm.isMonthReport ||vm.isComplete || vm.task.processState =='processState_1' ||vm.isChecked">
			<td class="formAlignRight">下一处理人员：<span class="required">(*)</td>
				<td>
					<div  class="radio-inline"  ng-repeat="x in vm.model.deptUsers" >
				  		<input type="radio" name="deptUsers" id="deptUsers" ng-model="vm.nextUser" data-val="true" data-val-required="必选" ng-checked="x.isSection"  value="{{x.displayName}}">{{x.displayName}}
				  	</div>
				  	<div>
				  		<span data-valmsg-for="deptUsers" data-valmsg-replace="true" class="required"></span>
				  	</div>
				</td>
			</tr>	
			<tr ng-hide="vm.isComplete">
				<td class="formAlignRight">操作：</td>
				<td >
					<button ng-hide="!vm.isYearPlan" ng-click="vm.handle(vm.processState_qianShou)" class="btn btn-success btn-sm" style="margin:0 10px;"><span class="glyphicon glyphicon-ok"></span>签收</button> 
					<button ng-hide="!vm.isYearPlan" ng-click="vm.handle(vm.processState_tuiWen)" class="btn btn-danger btn-sm" style="margin:0 10px;"><span class="glyphicon glyphicon-remove"></span>退文</button>				
					<!-- <button ng-hide="vm.isYearPlan" ng-click="vm.handle(vm.processState_next)" class="btn btn-info btn-sm" style="margin:0 10px;"><span class="glyphicon glyphicon-share-alt"></span>下一流程</button>				
					<button ng-hide="vm.isYearPlan" ng-click="vm.handle(vm.processState_tuiHuiJingBan)" class="btn btn-danger btn-sm" style="margin:0 10px;"><span class="glyphicon glyphicon-minus-sign"></span>退回经办人</button>				 -->
					<button ng-hide="vm.isYearPlan" ng-click="vm.handle()" class="btn btn-danger btn-sm" style="margin:0 10px;"><span class="glyphicon glyphicon-remove"></span>退文</button>		
					<button ng-hide="vm.isYearPlan" ng-click="vm.handle()" class="btn btn-info btn-sm" style="margin:0 10px;"><span class="glyphicon glyphicon-share-alt"></span>送出</button>
					<button ng-hide="vm.isYearPlan" ng-click="vm.handle(vm.processState_banJie)" class="btn btn-success btn-sm" style="margin:0 10px;"><span class="glyphicon glyphicon-ok"></span>办结</button>		
				</td>
				
			</tr>						
		</table>
  		
    </form>   
</div>

<!-- 申报信息模态框 -->
<div id="shenbaoInfo" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog"
		style="margin: 80px auto; width: 80%; max-width: 1000px;">
		<div class="modal-content">
			<div class="modal-header bg-primary" style="height:30px;padding:5px;">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">				
				<span aria-hidden="true">&times;</span>
			</button>
			<span class="modal-title">详细信息</span>
			</div>
			<div class="modal-body">
				<div ng-if="!vm.isMonthReport" ng-include  src="'/contents/admin/management/task/html/yearPlan/master.html'"></div>
				<div ng-if="vm.isMonthReport" ng-include  src="'/contents/admin/management/task/html/monthReport/master.html'"></div>   
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-info btn-sm" data-dismiss="modal">确认</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->