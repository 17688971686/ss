<div class="well well-sm" style="background:white;">
  <ol class="breadcrumb">
	  <li style="color:#0b8d39;padding-left:15px;"> 当前位置：</li>
	  <li><a href="#/managerCenter">首页</a></li>
      <li><a class="text-primary" href="javascript:;" ui-sref="planReach">计划下达</a></li>	 
      <li class="active">{{vm.title}}</li>
  </ol>
  <div class="toolbar">
  	<a class="btn btn-success btn-sm" href="javascript:;" ui-sref="planReach"><span class="glyphicon glyphicon-chevron-left"></span>&nbsp;返回</a>
  	<button ng-if="!vm.id" type="button" class="btn btn-success btn-sm" ng-click="vm.addApplication()" ng-disabled="vm.isSubmit"><span class="glyphicon glyphicon-ok"></span>&nbsp;创建</button>
 	<button ng-if="vm.id" ng-hide="vm.isStartProcess" type="button" class="btn btn-success btn-sm" ng-click="vm.editApplication()" ng-disabled="vm.isSubmit"><span class="glyphicon glyphicon-ok"></span>&nbsp;更新</button>
  </div>
  
  <div>
  	<form id="form" name="form">
  		<table class="table table-striped table-bordered">
  			<tr>
  				<td class="formAlignRight" style="width:120px;">标题：<span class="required">(*)</span></td>
  				<td>
  					<input type="text" class="form-control input-sm" id="applicationName" name="applicationName" ng-model="vm.model.applicationName" data-val="true" data-val-required="必填"/>
  					<span data-valmsg-for="applicationName" data-valmsg-replace="true" class="required"></span>
  				</td>
  				<td class="formAlignRight">申报单位：</td>
  				<td ng-bind="vm.userUnit.unitName"></td>
  			</tr>
  			<tr>
  				<td class="formAlignRight">负责人：<span class="required">(*)</span></td>
  				<td>
  					<input type="text" class="form-control input-sm" id="resPerson" name="resPerson" ng-model="vm.model.resPerson" data-val="true" data-val-required="必填"/>
  					<span data-valmsg-for="resPerson" data-valmsg-replace="true" class="required"></span>
  				</td>
  				<td class="formAlignRight">负责人电话：<span class="required">(*)</span></td>
  				<td>
  					<input type="text" class="form-control input-sm" id="resPersonTel" name="resPersonTel" ng-model="vm.model.resPersonTel" data-val="true" data-val-required="必填"/>
  					<span data-valmsg-for="resPersonTel" data-valmsg-replace="true" class="required"></span>
  				</td>
  			</tr>
  			<tr>
  				<td class="formAlignRight">申请时间：<span class="required">(*)</span></td>
  				<td colspan="3">
  					<input type="text" class="Wdate form-control input-sm" style="width:180px;" ng-model="vm.model.applicationTime" id="applicationTime" name="applicationTime"
								onClick="WdatePicker({isShowClear:false,readOnly:false,dateFmt:'yyyy-MM-dd',onpicked: function(){$(this).trigger('change')}})" data-val="true" data-val-required="必填"/>
  					<span data-valmsg-for="applicationTime" data-valmsg-replace="true" class="required"></span>
  				</td>
  			</tr>
  			<tr>
  				<td class="formAlignRight" style="vertical-align: middle;">项目信息：</td>
  				<td colspan="3">
  					<table class="table table-striped table-bordered" style="margin-bottom:0">
  						<tr>
  							<td class="text-center" colspan="10">
  								<p>
  									<strong style="font-size:1.2em">申请项目</strong>
  								</p>
  							</td>
  						</tr>
  						<tbody>
  							<tr>
  								<td>
		  							<div>
									  	<button class="btn btn-sm btn-primary" ng-click="vm.addProject()"  ng-hide="vm.isStartProcess"><span class="glyphicon glyphicon-plus"></span>添加项目</button>
									  	<button class="btn btn-sm btn-danger" ng-click="vm.projectDeletes()" ng-disabled="vm.isSubmit" ng-hide="vm.isStartProcess"><span class="glyphicon glyphicon-trash"></span>&nbsp;批量删除</button>
									</div> 
							        <div class="shenbaogrid" kendo-grid="grid" k-options="vm.shenBaoInfo_gridOptions"></div>
  								</td>
  							</tr>
  						</tbody>
  					</table>
  				</td>
  			</tr>
  			<tr>
  				<script type="text/template" id="columnBtns_shenBaoInfo">
					<a class="btn btn-xs btn-success" href="#/planReach/packPlan/addProject/{0}/{1}"><span class="glyphicon glyphicon-pencil"></span>添加项目</a>
				</script>
  				<td class="formAlignRight" style="vertical-align: middle;">打包计划信息：</td>
  				<td colspan="3">
  					<table class="table table-striped table-bordered" style="margin-bottom:0">
  						<tr>
  							<td class="text-center" colspan="10">
  								<p>
  									<strong style="font-size:1.2em">申请打包</strong>
  								</p>
  							</td>
  						</tr>
  						<tbody>
  							<tr>
  								<td>
		  							<div>
									  	<button class="btn btn-sm btn-primary" ng-click="vm.addPack()"  ng-hide="vm.isStartProcess"><span class="glyphicon glyphicon-plus"></span>添加打包</button>
									  	<button class="btn btn-sm btn-danger" ng-click="vm.packDeletes()" ng-disabled="vm.isSubmit" ng-hide="vm.isStartProcess"><span class="glyphicon glyphicon-trash"></span>&nbsp;批量删除</button>
									</div> 
							        <div class="packgrid" kendo-grid="grid" k-options="vm.packPlan_gridOptions"></div>
  								</td>
  							</tr>
  						</tbody>
  					</table>
  				</td>
  			</tr>
  		</table>
  	<!--项目申报记录模态框 -->
	<div class="modal fade" id="myModal" role="dialog"> 
		<div class="modal-dialog" style="width:800px;"> 
			<div class="modal-content"> 
				<div class="modal-header bg-primary">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button>  			
					<h4 class="modal-title" id="myModalLabel">项目数据</h4> 
				</div> 
				<div class="modal-body">
					<div class="projectsGrid" kendo-grid="vm.projectsGrid" k-options="vm.gridOptions_project"></div>			
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default btn-sm" data-dismiss="modal">关闭</button>	
					<button type="button" class="btn btn-success btn-sm" ng-click="vm.dialogConfirmSubmit_shenBaoInfo()" >确认</button>						
				</div>
			</div>
		</div>
	</div>
	<!--为打包计划添加项目申报显示模态框 -->
	<div class="modal fade" id="projectModalForPack" role="dialog"> 
		<div class="modal-dialog" style="width:800px;"> 
			<div class="modal-content"> 
				<div class="modal-header bg-primary">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button>  			
					<h4 class="modal-title" id="myModalLabel">项目数据</h4> 
				</div> 
				<div class="modal-body">
					<div class="projectsGrid" kendo-grid="vm.projectsGrid" k-options="vm.gridOptions_projectForPack"></div>			
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default btn-sm" data-dismiss="modal">关闭</button>	
				</div> 
			</div>
		</div>
	</div>
	
	<!--打包计划模态框 -->
	<div class="modal fade" id="packModal" role="dialog"> 
		<div class="modal-dialog" style="width:800px;"> 
			<div class="modal-content"> 
				<div class="modal-header bg-primary">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;	</button>  			
					<h4 class="modal-title" id="myModalLabel">打包数据</h4> 
				</div> 
				<div class="modal-body">
					<div class="packsGrid" kendo-grid="vm.packsGrid" k-options="vm.gridOptions_pack"></div>			
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default btn-sm" data-dismiss="modal">关闭</button>	
					<button type="button" class="btn btn-success btn-sm" ng-click="vm.dialogConfirmSubmit_packPlan()" >确认</button>						
				</div>
			</div>
		</div>
	</div>
  </form>
 </div> 
	
</div>
<script type="text/template" id="input">
	<input style="width:100px" id="capitalSum1" ng-model="vm.gg['{0}']" ng-if="!vm.isStartProcess" value="{1}" ng-blur="vm.addmoney('{0}')"/>
	<span ng-if="vm.isStartProcess" ng-bind="vm.gg['{0}']"></span>
</script>
<script type="text/template" id="input2">
	<input style="width:100px" id="capitalSum2" ng-model="vm.gt['{0}']" ng-if="!vm.isStartProcess" value="{1}" ng-blur="vm.addmoney('{0}')"/>
	<span ng-if="vm.isStartProcess" ng-bind="vm.gg['{0}']"></span>
</script>
<div ng-include src="'/contents/common/dialog-confirm.tmpl.html'"></div>
<div ng-include src="'/contents/common/dialog-alert.tmpl.html'"></div>